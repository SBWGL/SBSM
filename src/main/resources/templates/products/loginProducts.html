<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Shop Homepage - Start Bootstrap Template</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="/css/products.css" rel="stylesheet" />

        <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <style>
          .click{
            color: #9EA4AA;
            text-decoration: none;
          }

          .click:hover {
            color: black;
            text-decoration-color: black;
            text-decoration-thickness: 2.5px;
          }
          .link-secondary:hover{
            text-decoration: none;
          }

          .focus:focus {
            outline: none;
          }
        </style>
</head>
<body>
<div>
    <div>
        <div>
            <span class="py-2 d-none d-md-inline-block"
                  style="margin-left: 1200px; color: #000;"
                  th:onclick="|location.href='@{/basket}'|"
                  href="#"><a href="#" class="click">장바구니</a></span>
            <span class="py-2 d-none d-md-inline-block"
                  style="margin-left: 8px; color: #000;"
                  th:onclick="|location.href='@{/myPage}'|"
                  href="#"><a href="#" class="click">마이페이지</a></span>
            <span class="py-2 d-none d-md-inline-block"
                  style="margin-left: 7.5px; color: #000;"
                  th:onclick="|location.href='@{/logout}'|"
                  href="#"><a href="#" class="click">로그아웃</a></span>
        </div>
        <a th:onclick="|location.href='@{/}'|">
            <img src="/image/5.png" style="display: block; height: 60px; margin-left: 625.5px;">
        </a>
    </div>
</div>

<header class="site-header sticky-top py-1" style="background-color: #FFFFFF; border-width: 0px 0px 2px 0px; border-style: solid; border-color: black">
    <nav class="container d-flex flex-column flex-md-row justify-content-between navbar navbar-light">
    <span class="py-2 d-none d-md-inline-block"
          style="color: #000;"
          th:onclick="|location.href='@{/products/OUTER}'|"
    ><a href="#" class="click">OUTER</a></span>
        <span class="py-2 d-none d-md-inline-block"
              style="color: #000;"
              th:onclick="|location.href='@{/products/TOP}'|"
        ><a href="#" class="click">TOP</a></span>
        <span class="py-2 d-none d-md-inline-block"
              style="color: #000;"
              th:onclick="|location.href='@{/products/KINT}'|"
        ><a href="#" class="click">KINT</a></span>
        <span class="py-2 d-none d-md-inline-block"
              style="color: #000;"
              th:onclick="|location.href='@{/products/SHIRT}'|"
        ><a href="#" class="click">SHIRT</a></span>
        <span class="py-2 d-none d-md-inline-block"
              style="color: #000;"
              th:onclick="|location.href='@{/products/PANTS}'|"
        ><a href="#" class="click">PANTS</a></span>
        <span class="py-2 d-none d-md-inline-block"
              style="color: #000;"
              th:onclick="|location.href='@{/products/SHOES}'|"
        ><a href="#" class="click">SHOES</a></span>
        <span class="py-2 d-none d-md-inline-block"
              style="color: #000;"
              th:onclick="|location.href='@{/products/ACC}'|"
        ><a href="#" class="click">ACC</a></span>
        <form method="get">
            <input name="keyword" id="keyword" placeholder=""
                   class="focus"
                   onfocus="this.placeholder=''"
                   onblur="this.placeholder=''"
                   style="border: solid; border-width: 1px; border-right:0px; border-top:0px; border-left:0px; color: #9EA4AA;"
            >
            <button class="btn" type="button" id="find">
                <img src="/image/6.png" style="width: 35px;">
            </button>
        </form>
    </nav>
</header>
        <!-- Section-->
        <section class="py-5">
            <div class="container px-4 px-lg-5 mt-5">
                <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                <div th:each="product : ${products}">
                    <div class="col mb-5">
                        <div class="card h-100">
                            <!-- Sale badge-->
                            <div class="badge bg-dark text-white position-absolute" style="top: 0.5rem; right: 0.5rem">Sale</div>
                            <!-- Product image--><!--th:src="|/images/${product.productImage.getStoreImageName()}|"-->
                            <img class="card-img-top" th:onclick="|location.href='@{|/product/${product.productId}|}'|" th:src="|/images/${product.productImage.getStoreImageName()}|" width="250px" height="250px" />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5><a th:href="@{|/product/${product.productId}|}" class="fw-bolder" th:text="${product.productName}"></a></h5>
                                    <!-- Product reviews-->
                                    <div class="d-flex justify-content-center small text-warning mb-2">
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                    </div>
                                    <!-- Product price-->
                                    <span class="text-muted text-decoration-line-through">$20.00</span>
                                    <h6 th:text="|${#numbers.formatInteger(product.getPrice(),3,'COMMA')}원|">$18.00</h6>
                                </div>
                            </div>
                            <!-- Product actions-->
                            <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <div class="text-center"><a class="btn btn-outline-dark mt-auto" th:href="@{|/product/${product.productId}|}">상세보기</a></div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </section>
<!--paging process-->
        <div class="container px-4 px-lg-5 mt-5">
            <ul class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                <form class="d-flex">
                    <button class="btn" type="button" style="border: 0; outline: 0; margin-left: 23px;">
                        <span aria-hidden="true" class="badge bg-white text-black ms-1 rounded-pill">«</span>
                        <span class="sr-only">Previous</span>
                    </button>
                    <div th:each="num,index : ${#numbers.sequence(pageMake.getStartPage(),pageMake.getEndPage())}">
                        <button class="btn" style="border: 0; outline: 0;">
                            <span class="badge bg-white text-black ms-1 rounded-pill">
                                <a th:href="@{/products/{category}/{page}(category=${products[0].category}, page=${index.current})}" th:text="${num}" style="text-decoration: none; color: black;">1</a>
                            </span>
                        </button>
                    </div>
                    <button class="btn" type="button" style="border: 0; outline: 0;">
                        <span aria-hidden="true" class="badge bg-white text-black ms-1 rounded-pill">»</span>
                        <span class="sr-only">Next</span>
                    </button>
                </form>
            </ul>
        </div>
<!--paging process-->
<hr class="my-4" style="color: black;">
<footer class="container py-5">
    <div class="row">
        <div class="col-2 col-md">
            <font class="d-block mb-3" style="font-size: 25px; color: black;">쇼핑몰 프로젝트</font>
            <font class="d-block mb-3 text-muted">이정환, 공대표</font>
            <small class="d-block mb-3 text-muted">&copy;2021.08.09 ~ 2021.08.20</small>
        </div>
        <div class="col-6 col-md">
            <h5>프로젝트 정보</h5>
            <ul class="list-unstyled text-small">
                <li><a class="link-secondary" href="#">Spring Boot</a></li>
                <li><a class="link-secondary" href="#">thymeleaf</a></li>
                <li><a class="link-secondary" href="#">mySQL</a></li>
                <li><a class="link-secondary" href="#">mybatis</a></li>
                <li><a class="link-secondary" href="#">Bootstrap</a></li>
                <li><a class="link-secondary" href="#">jQuary</a></li>
            </ul>
        </div>
        <div class="col-6 col-md">
            <h5>회원 페이지</h5>
            <ul class="list-unstyled text-small">
                <li><a class="link-secondary" href="#">회원가입</a></li>
                <li><a class="link-secondary" href="#">이메일 인증</a></li>
                <li><a class="link-secondary" href="#">주소 api</a></li>
                <li><a class="link-secondary" href="#">비밀번호 암호화</a></li>
                <li><a class="link-secondary" href="#">로그인</a></li>
                <li><a class="link-secondary" href="#">마이페이지</a></li>
                <li><a class="link-secondary" href="#">비밀번호 변경</a></li>
            </ul>
        </div>
        <div class="col-6 col-md">
            <h5>장바구니 페이지</h5>
            <ul class="list-unstyled text-small">
                <li><a class="link-secondary" href="#">장바구니 등록</a></li>
                <li><a class="link-secondary" href="#">장바구니 개별 삭제</a></li>
                <li><a class="link-secondary" href="#">장바구니 전체 삭제</a></li>
                <li><a class="link-secondary" href="#">주문자 정보</a></li>
            </ul>
        </div>
        <div class="col-6 col-md">
            <h5>그 외</h5>
            <ul class="list-unstyled text-small">
                <li><a class="link-secondary" href="#">Interceptor를 통해 미로그인시 이동 제한</a></li>
                <li><a class="link-secondary" href="#">회원가입 및 장바구니 등록 시 Validation 등록</a></li>
                <li><a class="link-secondary" href="#">에러 처리</a></li>
            </ul>
        </div>
    </div>
</footer>
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<!--        <script src="js/scripts.js"></script>-->
    <script th:inline="javascript">
        $("#find").click(function(){
            let keyword = $("#keyword").val();
            console.log(keyword);
            $.ajax({
                type:"POST",
                url:"/products/find/"+keyword,
                data:JSON.stringify(keyword),
                contentType:"application/json;charset=utf-8",
                dataType:"json",
                success:function(){
                    console.log("성공")
                    location.href="/products";
                },
                error:function(error){
                    location.href="/products/find/"+keyword;
                }
            });
        });
    </script>
        <script th:inline="javascript">
        $("#pageNum").click(function(){
            let category=/*[[${products[1].category}]]*/;
            let page = $("#pageNum").val();
            console.log(category);
            console.log(page);
        });
        </script>
    </body>
</html>
